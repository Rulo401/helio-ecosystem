{
     "builder": "SIoTRxBuilder",
    "description": "# MESH entity reconciliaty",
    "user_template": "<#assign concept = \"tuberculosis miliary\"> <#-- Replace 'tuberculosis miliary' with the name of a new entity -->\r\n<#assign criteria = \"contains\">\r\n\r\n<@request concept criteria; result> \r\n  [=result] <#-- This is the variable been printed with the data of the found entities -->\r\n<\/@request>\r\n\r\n<#-- Macro definition to find the entity in MESH dataset -->\r\n<#macro request conceptRaw criteria>\r\n  <#assign concept = conceptRaw?replace(\" \",\"%20\")>\r\n  <#assign url = \"https:\/\/id.nlm.nih.gov\/mesh\/lookup\/descriptor?label=\"+concept+\"&match=\"+criteria+\"&year=current&limit=10\">\r\n  <#assign config=\"{ \\\"method\\\" : \\\"GET\\\", \\\"url\\\" : \\\"\"+url+\"\\\" }\">\r\n  <#assign descriptors=providers(\"HttpProvider\", config)>\r\n  <#assign url = \"https:\/\/id.nlm.nih.gov\/mesh\/lookup\/term?label=\"+concept+\"&match=\"+criteria+\"&limit=10\">\r\n  <#assign config=\"{ \\\"method\\\" : \\\"GET\\\", \\\"url\\\" : \\\"\"+url+\"\\\" }\">\r\n  <#assign terms=providers(\"HttpProvider\", config)>\r\n  <#assign altDesc = \"\">\r\n  <#assign altTerm = \"\">\r\n  <#list descriptors?eval as descriptor>\r\n    <#assign id = descriptor.resource?replace('http:\/\/id.nlm.nih.gov\/mesh\/','')>\r\n    <#assign url = \"https:\/\/id.nlm.nih.gov\/mesh\/lookup\/label?resource=\"+id>\r\n    <#assign config=\"{ \\\"method\\\" : \\\"GET\\\", \\\"url\\\" : \\\"\"+url+\"\\\" }\">\r\n    <#assign altDesc= providers(\"HttpProvider\", config)>\r\n  <\/#list>\r\n <#list terms?eval as term>\r\n    <#assign id = term.resource?replace('http:\/\/id.nlm.nih.gov\/mesh\/','')>\r\n    <#assign url = \"https:\/\/id.nlm.nih.gov\/mesh\/lookup\/label?resource=\"+id>\r\n    <#assign config=\"{ \\\"method\\\" : \\\"GET\\\", \\\"url\\\" : \\\"\"+url+\"\\\" }\">\r\n    <#assign altTerm= providers(\"HttpProvider\", config)>\r\n  <\/#list>\r\n   <#assign synonyms = \"[]\">\r\n   <#if altTerm?? && altDesc??> <#assign synonyms = altDesc?replace(']',altTerm?replace('[', ','))> \r\n   <#elseif altTerm??> <#assign synonyms = altTerm> \r\n   <#elseif altDesc??> <#assign synonyms = altDesc> \r\n   <\/#if>\r\n  <#nested \"{\\\"search\\\" : \\\"\"+conceptRaw+\"\\\", \\\"descriptors\\\" : \"+descriptors+\", \\\"terms\\\" : \"+terms+\", \\\"synonyms\\\" : \"+synonyms+\" }\">\r\n  \r\n<\/#macro>",
    "solution_template": "<#assign concept = \"tuberculosis miliary\"> <#-- Replace 'tuberculosis miliary' with the name of a new entity -->\r\n<#assign criteria = \"contains\">\r\n\r\n<@request concept criteria; result> \r\n  [=result] <#-- This is the variable been printed with the data of the found entities -->\r\n<\/@request>\r\n\r\n<#-- Macro definition to find the entity in MESH dataset -->\r\n<#macro request conceptRaw criteria>\r\n  <#assign concept = conceptRaw?replace(\" \",\"%20\")>\r\n  <#assign url = \"https:\/\/id.nlm.nih.gov\/mesh\/lookup\/descriptor?label=\"+concept+\"&match=\"+criteria+\"&year=current&limit=10\">\r\n  <#assign config=\"{ \\\"method\\\" : \\\"GET\\\", \\\"url\\\" : \\\"\"+url+\"\\\" }\">\r\n  <#assign descriptors=providers(\"HttpProvider\", config)>\r\n  <#assign url = \"https:\/\/id.nlm.nih.gov\/mesh\/lookup\/term?label=\"+concept+\"&match=\"+criteria+\"&limit=10\">\r\n  <#assign config=\"{ \\\"method\\\" : \\\"GET\\\", \\\"url\\\" : \\\"\"+url+\"\\\" }\">\r\n  <#assign terms=providers(\"HttpProvider\", config)>\r\n  <#assign altDesc = \"\">\r\n  <#assign altTerm = \"\">\r\n  <#list descriptors?eval as descriptor>\r\n    <#assign id = descriptor.resource?replace('http:\/\/id.nlm.nih.gov\/mesh\/','')>\r\n    <#assign url = \"https:\/\/id.nlm.nih.gov\/mesh\/lookup\/label?resource=\"+id>\r\n    <#assign config=\"{ \\\"method\\\" : \\\"GET\\\", \\\"url\\\" : \\\"\"+url+\"\\\" }\">\r\n    <#assign altDesc= providers(\"HttpProvider\", config)>\r\n  <\/#list>\r\n <#list terms?eval as term>\r\n    <#assign id = term.resource?replace('http:\/\/id.nlm.nih.gov\/mesh\/','')>\r\n    <#assign url = \"https:\/\/id.nlm.nih.gov\/mesh\/lookup\/label?resource=\"+id>\r\n    <#assign config=\"{ \\\"method\\\" : \\\"GET\\\", \\\"url\\\" : \\\"\"+url+\"\\\" }\">\r\n    <#assign altTerm= providers(\"HttpProvider\", config)>\r\n  <\/#list>\r\n   <#assign synonyms = \"[]\">\r\n   <#if altTerm?? && altDesc??> <#assign synonyms = altDesc?replace(']',altTerm?replace('[', ','))> \r\n   <#elseif altTerm??> <#assign synonyms = altTerm> \r\n   <#elseif altDesc??> <#assign synonyms = altDesc> \r\n   <\/#if>\r\n  <#nested \"{\\\"search\\\" : \\\"\"+conceptRaw+\"\\\", \\\"descriptors\\\" : \"+descriptors+\", \\\"terms\\\" : \"+terms+\", \\\"synonyms\\\" : \"+synonyms+\" }\">\r\n  \r\n<\/#macro>",
    "expected_result": "{\"search\" : \"tuberculosis miliary\", \"descriptors\" : [{\"resource\":\"http:\/\/id.nlm.nih.gov\/mesh\/D014391\",\"label\":\"Tuberculosis, Miliary\"}], \"terms\" : [{\"resource\":\"http:\/\/id.nlm.nih.gov\/mesh\/T042085\",\"label\":\"Tuberculosis, Miliary\"}], \"synonyms\" : [\"Tuberculosis, Miliary\",\"Miliary Tuberculoses\",\"Miliary Tuberculosis\",\"Tuberculoses, Miliary\",\"Tuberculosis, Miliary\"] }"
}
