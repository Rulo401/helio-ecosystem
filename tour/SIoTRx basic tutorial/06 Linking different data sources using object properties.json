{
    "builder": "SIoTRxBuilder",
    "description": "## Theory\r\nUnlike RML, in SIoTRx we are in charge of checking the possibility of linking each occurrence. In order to link resources properly, you must follow the steps below.\r\n\r\n 1. For linking data that is stored in different sources first they need to be loaded using providers.\r\n 2. Then, the RDF triplets associated to these sources should be created. \r\n 3. Finally, comparing the suitable values from the data some conditional triples relating subjects generated from both sources must be generated.\r\n\r\n## Hands-on\r\n### Task\r\nFor the example below, complete the mapping to link people to the places they live by using the property [foaf:based_near](http:\/\/xmlns.com\/foaf\/0.1\/based_near).\r\n### CSV file content\r\n| ID | Name | Phone | City |\r\n|--|--|--|--|\r\n| 1 | \"Lily Dickens\" | 585-610-2352 | Oneonta |\r\n| 2 | \"Chadd Sporer\" | +1-352-334-0992 | Iowa |\r\n| 3 | \"Katharina Kuvalis\" | (272) 642-0684 | Alberta |\r\n| 4 | \"Wilhelmine Johns III\" | 574.747.4829 | Bock |\r\n| 5 | \"Sofia Rowe\" | +15204328362 | Elmhurst |\r\n### JSON file content\r\n```json\r\n[\r\n  {\r\n\t\"name\": \"Oneonta\",\r\n\t\"features\": {\r\n\t\t\"surface\": {\r\n\t\t\t\"value\": 90.16,\r\n\t\t\t\"units\": \"Km2\"\r\n\t\t},\r\n\t\t\"population\": {\r\n\t\t\t\"amount\": \"1,812\",\r\n\t\t\t\"date\": 2018\r\n\t\t}\r\n\t},\r\n\t\"location\": {\r\n\t\t\"latitude\": \"44.9625428\",\r\n\t\t\"longitude\": \"-74.4168577\"\r\n\t}\r\n  },\r\n  {\r\n\t\"name\": \"Iowa\",\r\n\t\"features\": {\r\n\t\t\"surface\": {\r\n\t\t\t\"value\": 167.2,\r\n\t\t\t\"units\": \"Km2\"\r\n\t\t},\r\n\t\t\"population\": {\r\n\t\t\t\"amount\": \"133,611\",\r\n\t\t\t\"date\": 2020\r\n\t\t}\r\n\t},\r\n\t\"location\": {\r\n\t\t\"latitude\": \"29.6862705\",\r\n\t\t\"longitude\": \"-82.319746\"\r\n\t}\r\n  }...\r\n]\r\n```",
    "user_template": "<#assign people=providers(\"HttpProvider\", { \"method\" : \"GET\", \"url\" : \"https:\/\/raw.githubusercontent.com\/helio-ecosystem\/helio-ecosystem\/main\/resources\/mappings-data\/ldac\/people.csv\"})>\r\n<#assign peopleRows = people?trim?split(\"\\n\")>\r\n<#list peopleRows as personRow>\r\n<#if !personRow?is_first>\r\n<#assign personColumns = personRow?split(\",\")>\r\n<http:\/\/sample.com\/resource\/[=personColumns[0]]> a <http:\/\/xmlns.com\/foaf\/0.1\/Person> ;\r\n    foaf:phone \"[=personColumns[2]]\" ;\r\n    foaf:name [=personColumns[1]] .\r\n<\/#if>\r\n<\/#list>\r\n\r\n<#assign locations=providers(\"HttpProvider\", { \"method\" : \"GET\", \"url\" : \"https:\/\/raw.githubusercontent.com\/helio-ecosystem\/helio-ecosystem\/main\/resources\/mappings-data\/ldac\/nested_locations1.json\"})>\r\n<#assign locations = locations?eval>\r\n<#list locations as location>\r\n<http:\/\/sample.com\/resource\/[=location.name]> a <http:\/\/schema.org\/Place>;\r\n    <http:\/\/xmlns.com\/foaf\/0.1\/name> \"[=location.name]\" ;\r\n    <http:\/\/vocab.es\/schema#surface> \"[=location.features.surface.value] [=location.features.surface.units]\" .\r\n<\/#list>\r\n\r\n<#list peopleRows as personRow>\r\n<#if !personRow?is_first>\r\n<#assign personColumns = personRow?split(\",\")>\r\n<#list locations as location>\r\n<#-- WRITE BELOW -->\r\n\r\n<\/#list>\r\n<\/#if>\r\n<\/#list>",
    "solution_template": "<#assign people=providers(\"HttpProvider\", { \"method\" : \"GET\", \"url\" : \"https:\/\/raw.githubusercontent.com\/helio-ecosystem\/helio-ecosystem\/main\/resources\/mappings-data\/ldac\/people.csv\"})>\r\n<#assign peopleRows = people?trim?split(\"\\n\")>\r\n<#list peopleRows as personRow>\r\n<#if !personRow?is_first>\r\n<#assign personColumns = personRow?split(\",\")>\r\n<http:\/\/sample.com\/resource\/[=personColumns[0]]> a <http:\/\/xmlns.com\/foaf\/0.1\/Person> ;\r\n    foaf:phone \"[=personColumns[2]]\" ;\r\n    foaf:name [=personColumns[1]] .\r\n<\/#if>\r\n<\/#list>\r\n\r\n<#assign locations=providers(\"HttpProvider\", { \"method\" : \"GET\", \"url\" : \"https:\/\/raw.githubusercontent.com\/helio-ecosystem\/helio-ecosystem\/main\/resources\/mappings-data\/ldac\/nested_locations1.json\"})>\r\n<#assign locations = locations?eval>\r\n<#list locations as location>\r\n<http:\/\/sample.com\/resource\/[=location.name]> a <http:\/\/schema.org\/Place>;\r\n    <http:\/\/xmlns.com\/foaf\/0.1\/name> \"[=location.name]\" ;\r\n    <http:\/\/vocab.es\/schema#surface> \"[=location.features.surface.value] [=location.features.surface.units]\" .\r\n<\/#list>\r\n\r\n<#list peopleRows as personRow>\r\n<#if !personRow?is_first>\r\n<#assign personColumns = personRow?split(\",\")>\r\n<#list locations as location>\r\n<#-- WRITE BELOW -->\r\n  <#assign sameLocation= location.name?trim == personColumns[3]?trim>\r\n  <#if sameLocation>\r\n<http:\/\/sample.com\/resource\/[=personColumns[0]]> <http:\/\/xmlns.com\/foaf\/0.1\/based_near> <http:\/\/sample.com\/resource\/[=location.name]> .\r\n  <\/#if>\r\n<\/#list>\r\n<\/#if>\r\n<\/#list>",
    "expected_result": "<http://sample.com/resource/1> a <http://xmlns.com/foaf/0.1/Person> ;\n    foaf:phone \"585-610-2352\" ;\n    foaf:name \"Lily Dickens\" .\n<http://sample.com/resource/2> a <http://xmlns.com/foaf/0.1/Person> ;\n    foaf:phone \"+1-352-334-0992\" ;\n    foaf:name \"Chadd Sporer\" .\n<http://sample.com/resource/3> a <http://xmlns.com/foaf/0.1/Person> ;\n    foaf:phone \"(272) 642-0684\" ;\n    foaf:name \"Katharina Kuvalis\" .\n<http://sample.com/resource/4> a <http://xmlns.com/foaf/0.1/Person> ;\n    foaf:phone \"574.747.4829\" ;\n    foaf:name \"Wilhelmine Johns III\" .\n<http://sample.com/resource/5> a <http://xmlns.com/foaf/0.1/Person> ;\n    foaf:phone \"+15204328362\" ;\n    foaf:name \"Sofia Rowe\" .\n\n<http://sample.com/resource/Oneonta> a <http://schema.org/Place>;\n    <http://xmlns.com/foaf/0.1/name> \"Oneonta\" ;\n    <http://vocab.es/schema#surface> \"90.16 Km2\" .\n<http://sample.com/resource/Iowa> a <http://schema.org/Place>;\n    <http://xmlns.com/foaf/0.1/name> \"Iowa\" ;\n    <http://vocab.es/schema#surface> \"167.2 Km2\" .\n<http://sample.com/resource/Alberta> a <http://schema.org/Place>;\n    <http://xmlns.com/foaf/0.1/name> \"Alberta\" ;\n    <http://vocab.es/schema#surface> \"33.75 Km2\" .\n<http://sample.com/resource/Bock> a <http://schema.org/Place>;\n    <http://xmlns.com/foaf/0.1/name> \"Bock\" ;\n    <http://vocab.es/schema#surface> \"73.74 Km2\" .\n<http://sample.com/resource/Elmhurst> a <http://schema.org/Place>;\n    <http://xmlns.com/foaf/0.1/name> \"Elmhurst\" ;\n    <http://vocab.es/schema#surface> \"13.42 Km2\" .\n\n<http://sample.com/resource/1> <http://xmlns.com/foaf/0.1/based_near> <http://sample.com/resource/Oneonta> .\n<http://sample.com/resource/2> <http://xmlns.com/foaf/0.1/based_near> <http://sample.com/resource/Iowa> .\n<http://sample.com/resource/3> <http://xmlns.com/foaf/0.1/based_near> <http://sample.com/resource/Alberta> .\n<http://sample.com/resource/4> <http://xmlns.com/foaf/0.1/based_near> <http://sample.com/resource/Bock> .\n<http://sample.com/resource/5> <http://xmlns.com/foaf/0.1/based_near> <http://sample.com/resource/Elmhurst> ."
}
