{
    "description": "This mapping has an ODRL privacy policy and the user dont have access to the data. The operator should be gt or lt, depending of the tmp value.",
    "user_template": "<#assign weatherConf = \"{\\\"url\\\" : \\\"https://api.open-meteo.com/v1/forecast?latitude=40.4050099&longitude=-3.839519&hourly=temperature_2m\\\"}\"><#assign weather=providers(\"URLProvider\", weatherConf)?eval><#assign currentTime = .now?time?keep_before(\":\")><#assign tmp=\"ERROR\"><#list weather.hourly.time as elem><#if elem?contains(\"T\"+currentTime) || elem?contains(\"T0\"+currentTime)> <#assign tmp=weather.hourly.temperature_2m[elem?index]> <#break></#if></#list><#assign policy>{ \"@context\": \"http://www.w3.org/ns/odrl.jsonld\", \"@type\": \"Set\",\"uid\": \"http://example.com/policy:1010\",\"permission\": [{\"target\": \"http://homeassistant.personal.com:8123/api/states/temp\",\"action\": \"display\", \"constraint\": [{\"leftOperand\": { \"@value\": \"[=tmp]\", \"@type\": \"xsd:double\" },\"operator\": \"t\", \"rightOperand\":  { \"@value\": \"35\", \"@type\": \"xsd:double\" }} ]}]}</#assign><@action type = \"ODRL\" data=policy; result>[=result]</@action>",
    "solution_template": "<#assign weatherConf = \"{\\\"url\\\" : \\\"https://api.open-meteo.com/v1/forecast?latitude=40.4050099&longitude=-3.839519&hourly=temperature_2m\\\"}\"><#assign weather=providers(\"URLProvider\", weatherConf)?eval><#assign currentTime = .now?time?keep_before(\":\")><#assign tmp=\"ERROR\"><#list weather.hourly.time as elem><#if elem?contains(\"T\"+currentTime) || elem?contains(\"T0\"+currentTime)> <#assign tmp=weather.hourly.temperature_2m[elem?index]> <#break></#if></#list><#assign policy>{ \"@context\": \"http://www.w3.org/ns/odrl.jsonld\", \"@type\": \"Set\",\"uid\": \"http://example.com/policy:1010\",\"permission\": [{\"target\": \"http://homeassistant.personal.com:8123/api/states/temp\",\"action\": \"display\", \"constraint\": [{\"leftOperand\": { \"@value\": \"[=tmp]\", \"@type\": \"xsd:double\" },\"operator\": \"lt\", \"rightOperand\":  { \"@value\": \"35\", \"@type\": \"xsd:double\" }} ]}]}</#assign><@action type = \"ODRL\" data=policy; result>[=result]</@action>",
    "expected_result": "{\"http://homeassistant.personal.com:8123/api/states/temp\":[\"http://www.w3.org/ns/odrl/2/display\"]}"
}
