{
    "description": "This mapping has an ODRL privacy policy and the user dont have access to the data. The operator should be gt or lt, depending of the tmp value.",
    "user_template": "<#assign weatherConf = \"{\\\"url\\\" : \\\"https://api.open-meteo.com/v1/forecast?latitude=40.4050099&longitude=-3.839519&hourly=temperature_2m\\\"}\">\n<#assign weather=providers(\"URLProvider\", weatherConf)?eval>\n<#assign currentTime = .now?time?keep_before(\":\")>\n<#assign tmp=\"ERROR\">\n<#list weather.hourly.time as elem>\n<#if elem?contains(\"T\"+currentTime) || elem?contains(\"T0\"+currentTime)>\n <#assign tmp=weather.hourly.temperature_2m[elem?index]> <#break></#if></#list>\n<#assign policy>\n{ \"@context\": \"http://www.w3.org/ns/odrl.jsonld\",\n \"@type\": \"Set\",\n \"uid\": \"http://example.com/policy:1010\",\n \"permission\": [{\n \"target\": \"http://homeassistant.personal.com:8123/api/states/temp\",\n \"action\": \"display\",\n \"constraint\": [{\n \"leftOperand\": { \"@value\": \"[=tmp]\", \"@type\": \"xsd:double\" },\n \"operator\": \"t\",\n \"rightOperand\":  { \"@value\": \"35\", \"@type\": \"xsd:double\" }\n } ]}]}\n</#assign>\n<@action type = \"ODRL\" data=policy; result>\n[=result]\n</@action>",
    "solution_template": "<#assign weatherConf = \"{\\\"url\\\" : \\\"https://api.open-meteo.com/v1/forecast?latitude=40.4050099&longitude=-3.839519&hourly=temperature_2m\\\"}\">\n<#assign weather=providers(\"URLProvider\", weatherConf)?eval>\n<#assign currentTime = .now?time?keep_before(\":\")>\n<#assign tmp=\"ERROR\">\n<#list weather.hourly.time as elem>\n<#if elem?contains(\"T\"+currentTime) || elem?contains(\"T0\"+currentTime)>\n <#assign tmp=weather.hourly.temperature_2m[elem?index]> <#break></#if></#list>\n<#assign policy>\n{ \"@context\": \"http://www.w3.org/ns/odrl.jsonld\",\n \"@type\": \"Set\",\n \"uid\": \"http://example.com/policy:1010\",\n \"permission\": [{\n \"target\": \"http://homeassistant.personal.com:8123/api/states/temp\",\n \"action\": \"display\",\n \"constraint\": [{\n \"leftOperand\": { \"@value\": \"[=tmp]\", \"@type\": \"xsd:double\" },\n \"operator\": \"gt\",\n \"rightOperand\":  { \"@value\": \"35\", \"@type\": \"xsd:double\" }\n } ]}]}\n</#assign>\n<@action type = \"ODRL\" data=policy; result>\n[=result]\n</@action>",
    "expected_result": "{}"
}
