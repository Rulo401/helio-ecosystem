{
    "builder": "SIoTRxBuilder",
    "description": "## Hands-on\r\n### Task\r\nGiven the two TripleMap in the mapping below, link the **<#TriplesMap1>** to **<#TriplesMap2>** so it has the object property ***foaf:based_near*** relating people and cities.\r\n### CSV file content\r\n| ID | Name | Phone | City |\r\n|--|--|--|--|\r\n| 1 | \"Lily Dickens\" | 585-610-2352 | Oneonta |\r\n| 2 | \"Chadd Sporer\" | +1-352-334-0992 | Iowa |\r\n| 3 | \"Katharina Kuvalis\" | (272) 642-0684 | Alberta |\r\n| 4 | \"Wilhelmine Johns III\" | 574.747.4829 | Bock |\r\n| 5 | \"Sofia Rowe\" | +15204328362 | Elmhurst |\r\n### JSON file content\r\n    [\r\n\t    {\r\n\t\t    \"name\": \"Oneonta\",\r\n\t\t    \"surface\": \"90.16\",\r\n\t\t    \"population\": \"1812\",\r\n\t\t    \"latitude\": \"44.9625428\",\r\n\t\t    \"longitude\": \"-74.4168577\"\r\n\t\t},\r\n\t\t{\r\n\t\t    \"name\": \"Iowa\",\r\n\t\t    \"surface\": \"167.2\",\r\n\t\t    \"population\": \"133611\",\r\n\t\t    \"latitude\": \"29.6862705\",\r\n\t\t    \"longitude\": \"-82.319746\"\r\n\t\t}, \r\n\t\t...\r\n\t]",
    "user_template": "<#assign locations=providers(\"HttpProvider\", {\"url\" : \"https:\/\/raw.githubusercontent.com\/helio-ecosystem\/helio-ecosystem\/main\/resources\/mappings-data\/ldac\/plain_locations.json\", \"method\" : \"GET\"})>\r\n<#assign jpath=handlers(\"JsonHandler\")>\r\n<#-- WRITE BELOW -->\r\n\r\n\r\n<#assign people=providers(\"HttpProvider\", {\"url\" : \"https:\/\/raw.githubusercontent.com\/helio-ecosystem\/helio-ecosystem\/main\/resources\/mappings-data\/ldac\/people.csv\", \"method\" : \"GET\"})>\r\n<#-- WRITE BELOW -->",
    "solution_template": "<#assign locations=providers(\"HttpProvider\", {\"url\" : \"https:\/\/raw.githubusercontent.com\/helio-ecosystem\/helio-ecosystem\/main\/resources\/mappings-data\/ldac\/plain_locations.json\", \"method\" : \"GET\"})>\r\n<#assign jpath=handlers(\"JsonHandler\")>\r\n<#-- WRITE BELOW -->\r\n<#list jpath.filter(\"$.*\",locations) as location>\r\n<http:\/\/sample.com\/resource\/[=jpath.filter(\"name\",location)]> a sch:Place ;\r\n\tonto:population [=jpath.filter(\"population\",location)] ;\r\n\tonto:surface [=jpath.filter(\"surface\",location)] ;\r\n\tgeo:lat [=jpath.filter(\"latitude\",location)] ;\r\n\tgeo:long [=jpath.filter(\"longitude\",location)] ;\r\n\tsch:name \"[=jpath.filter(\"name\",location)]\" .<#sep>\r\n \r\n<\/#sep>\r\n<\/#list>\r\n\r\n\r\n<#assign people=providers(\"HttpProvider\", {\"url\" : \"https:\/\/raw.githubusercontent.com\/helio-ecosystem\/helio-ecosystem\/main\/resources\/mappings-data\/ldac\/people.csv\", \"method\" : \"GET\"})>\r\n<#-- WRITE BELOW -->\r\n<#list people?split(\"\\n\") as person>\r\n\t<#if !person?is_first>\r\n\t\t<#assign values=person?split(\",\")>\r\n\t\t<#if values?size == 4>\r\n<http:\/\/sample.com\/resource\/P[=values[0]]> a foaf:Person ;\r\n\trdfs:seeAlso <http:\/\/dbpedia.org\/resource\/[=values[3]]> ;\r\n<#list jpath.filter(\"$.*.name\",locations) as locationName>\r\n  <#assign sameLocation= locationName?trim == values[3]?trim>\r\n\t\t<#if sameLocation>\r\n\tfoaf:based_near <http:\/\/sample.com\/resource\/[=values[3]]> ;\r\n\t\t<#break>\r\n\t\t<\/#if>\r\n<\/#list>\r\n\tfoaf:name [=values[1]] ;\r\n\tfoaf:phone \"[=values[2]]\" .<#sep>\r\n \r\n<\/#sep>\r\n\t\t<\/#if>\r\n\t<\/#if>\r\n<\/#list>",
    "expected_result": "<http:\/\/sample.com\/resource\/Oneonta> a sch:Place ;\r\n\tonto:population 1812 ;\r\n\tonto:surface 90.16 ;\r\n\tgeo:lat 44.9625428 ;\r\n\tgeo:long -74.4168577 ;\r\n\tsch:name \"Oneonta\" .\r\n \r\n<http:\/\/sample.com\/resource\/Iowa> a sch:Place ;\r\n\tonto:population 133611 ;\r\n\tonto:surface 167.2 ;\r\n\tgeo:lat 29.6862705 ;\r\n\tgeo:long -82.319746 ;\r\n\tsch:name \"Iowa\" .\r\n \r\n<http:\/\/sample.com\/resource\/Alberta> a sch:Place ;\r\n\tonto:population 1242 ;\r\n\tonto:surface 33.75 ;\r\n\tgeo:lat 41.0816094 ;\r\n\tgeo:long -76.4098259 ;\r\n\tsch:name \"Alberta\" .\r\n \r\n<http:\/\/sample.com\/resource\/Bock> a sch:Place ;\r\n\tonto:population 52657 ;\r\n\tonto:surface 73.74 ;\r\n\tgeo:lat 41.6908535 ;\r\n\tgeo:long -85.9562663 ;\r\n\tsch:name \"Bock\" .\r\n \r\n<http:\/\/sample.com\/resource\/Elmhurst> a sch:Place ;\r\n\tonto:population 5199 ;\r\n\tonto:surface 13.42 ;\r\n\tgeo:lat 31.4199205 ;\r\n\tgeo:long -109.9103821 ;\r\n\tsch:name \"Elmhurst\" .\r\n\r\n<http:\/\/sample.com\/resource\/P1> a foaf:Person ;\r\n\trdfs:seeAlso <http:\/\/dbpedia.org\/resource\/Oneonta> ;\r\n\tfoaf:based_near <http:\/\/sample.com\/resource\/Oneonta> ;\r\n\tfoaf:name \"Lily Dickens\" ;\r\n\tfoaf:phone \"585-610-2352\" .\r\n \r\n<http:\/\/sample.com\/resource\/P2> a foaf:Person ;\r\n\trdfs:seeAlso <http:\/\/dbpedia.org\/resource\/Iowa> ;\r\n\tfoaf:based_near <http:\/\/sample.com\/resource\/Iowa> ;\r\n\tfoaf:name \"Chadd Sporer\" ;\r\n\tfoaf:phone \"+1-352-334-0992\" .\r\n \r\n<http:\/\/sample.com\/resource\/P3> a foaf:Person ;\r\n\trdfs:seeAlso <http:\/\/dbpedia.org\/resource\/Alberta> ;\r\n\tfoaf:based_near <http:\/\/sample.com\/resource\/Alberta> ;\r\n\tfoaf:name \"Katharina Kuvalis\" ;\r\n\tfoaf:phone \"(272) 642-0684\" .\r\n \r\n<http:\/\/sample.com\/resource\/P4> a foaf:Person ;\r\n\trdfs:seeAlso <http:\/\/dbpedia.org\/resource\/Bock> ;\r\n\tfoaf:based_near <http:\/\/sample.com\/resource\/Bock> ;\r\n\tfoaf:name \"Wilhelmine Johns III\" ;\r\n\tfoaf:phone \"574.747.4829\" .\r\n \r\n<http:\/\/sample.com\/resource\/P5> a foaf:Person ;\r\n\trdfs:seeAlso <http:\/\/dbpedia.org\/resource\/Elmhurst> ;\r\n\tfoaf:based_near <http:\/\/sample.com\/resource\/Elmhurst> ;\r\n\tfoaf:name \"Sofia Rowe\" ;\r\n\tfoaf:phone \"+15204328362\" ."
}
